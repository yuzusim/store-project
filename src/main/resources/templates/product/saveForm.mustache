{{> layout/header}}
<style>

</style>
<div class="container w14 pt-100 pb-100" style="margin: 0 auto;">
    <div class="d-flex prodsav-W">
        <!--사진-->
        <div class="prodsave-L">
            <!--    <img src="/upload/" width="500" height="500" alt="사진없음">-->
            <form action="/upload" method="post" enctype="multipart/form-data">

                <div class="card img-fluid" style="width:300px; height: 300px">
                    <img src="/upload/" width="500" height="500" alt="사진없음" style="width:100%">
                    <!--        <img class="card-img-top" src="../bootstrap4/img_avatar1.png" alt="Card image" style="width:100%">-->
                    <!--        <div class="card-img-overlay">-->
                    <!--            <h4 class="card-title">John Doe</h4>-->
                    <!--            <p class="card-text">Some example text some example text. Some example text some example text. Some example text some example text. Some example text some example text.</p>-->
                    <!--            <a href="#" class="btn btn-primary">See Profile</a>-->
                    <!--        </div>-->
                </div>

                <input type="text" name="title" placeholder="사진제목..." style="width:300px;">
                <input type="file" name="imgFile">
                <button>사진업로드</button>
            </form>

        </div>
        <!--사진-->

        <!--상품등록-->
        <div class="prodsave-R">
            <form action="/product/add" method="post" onsubmit="return valid()">
                <div class="d-flex mb-3 mt-3">
                    <div>
                        상품명 : <input id="name" name="name" type="text"
                                     placeholder="상품명을 적어주세요" style="width:70%;">
                    </div>
                    <div>
                        <button type="button" onclick="nameSameCheck()" class="btn btn-warning">상품중복체크</button>
                    </div>
                </div>

                <div class="mb-3 mt-3">
                    상품가격 : <input name="price" type="number"
                                  placeholder="상품 가격을 적어주세요">
                </div>
                <div class="mb-3 mt-3">
                    상품수량 : <input name="qty" type="number" placeholder="상품 수량을 적어주세요">
                </div>
                <button type="submit" class="btn btn-primary">상품등록완료</button>
            </form>
        </div>
    </div>
</div>

<script>
    let isSameCheck = false;

    function valid() {
        if (isSameCheck == false) {
            alert("상품 중복체크를 해야 합니다");
        }
        return isSameCheck;
    }

    function nameSameCheck() {
        let name = $("#name").val();

        $.ajax({
            url: "/api/name-same-check?name=" + name,
            type: "get"
            // 여기에서 요청을 하면 되요.
        }).done((res) => {
            console.log(res);
            if (res.body == true) {
                isSameCheck = true;
                alert("상품 중복 체크 완료");
            } else {
                isSameCheck = false;
                alert("동일한 상품이 존재합니다");
            }

        }).fail((res) => {
            alert(res.responseJSON.msg);
        });
    }
</script>
{{> layout/footer}}